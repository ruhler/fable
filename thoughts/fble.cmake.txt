Fble CMake
==========
Goal: see if we can uses CMake to build Fble packages, including the compiler
and fble program packages.

The motivation is: if we can build things with cmake, then it should be more
portable, handle configuration and package dependencies automatically, and
make it easy to create distributable packages.

Step 1: let's do a straight forward cmake build setup for libfble.a. This
should be easy I claim. Nothing crazy or fancy needed.

---

Well, this is pretty frustrating. I need -std=c99 to build properly, because I
use 'typeof' as a variable name. CMake claims to support setting required
standards, but it's picking gnu99 instead of c99.

Perhaps that's a hint that it's worth me not using 'typeof' in the name of
variables? That way it will be more portable?

Looks like set(CMAKE_C_EXTENSIONS OFF) is required. Cmake does extensions on
by default. I want to get feedback from the compiler if I'm using any
extensions, so C_EXTENSIONS OFF sounds reasonable to me.

With that, it's pretty straight forward to build a vanilla libfble.a using
cmake. I'm not convinced the settings for cmake are well defined. I suspect
I'm just getting lucky that by specifying a standard and extensions off, it
happens to set the right flags. Oh well. It probably doesn't matter that much
in practice anyway.

---

Next challenge: cmake isn't building the parser. Looks like there is a module
that supports that. Okay. Looks good. We have fble-test now.

What's next? fble-stdio would be nice. Okay, that works fine.

Next? Maybe add Fble/Tests.fble test?

How will I specify that it depends on the value of all the relevant fble
files? I bet it silently doesn't care about those dependencies. Like it
silently ignored parse.y that I passed. Hmm...

---

cmake has a for loop, which is nice for factoring out common code for a lot of
target. For example, I can use a for loop for all the tools.

Documentation is tricky. I read stuff and don't have a clue how to make use of
it in practice. For example, find_package. It looks like SDL2 ships with a
cmake file describing the package, so I can use that. But GL doesn't. I'll
have to figure out how to set that up.

Okay, looks like there is a FindOpenGL cmake thing somewhere. I wonder where?

/usr/share/cmake-3.16/Modules/FindOpenGL.cmake

And there are other modules there that ship with CMake.
