
@ Bool@ = /Core/Bool%.Bool@;
% False = /Core/Bool%.False;

<@>@ List@ = /List%.List@;
<@>% List = /List%.List;

@ Stdio@ = /Stdio%.Stdio@;
@ IO@ = /Stdio%.IO@;

@ String@ = /String%.String@;
% Str = /String%.Str;

@ Test@ = /Core/Test%.Test@;
% TestSuite = /Core/Test%.TestSuite;

# Import to test compilation.
% _ = /Char/Show%;
% _ = /Fble/Bench%;
% _ = /Fble/DebugTest%;
% _ = /Fble/ProfilesTest%;
% _ = /Fble/StackSmasher%;
% _ = /Graphics/App%;
% _ = /Graphics/2D/Circle%;
% _ = /Invaders/App%;
% _ = /Invaders/Bench%;
% _ = /Invaders/Screenshot/App%;
% _ = /Pinball/App%;
% _ = /Snake%;
% _ = /Snake/Bench%;
% _ = /Stdio/Cat%;
% _ = /Stdio/Test%;

Test@ AllTests = TestSuite(Str|Fble, List<Test@>[
  /Core/Bool/Tests%.Tests,
  /BenchmarkGame/Tests%.Tests,
  /Digits/Tests%.Tests,
  /GameOfLife/Tests%.Tests,
  /Graphics/2D/Tests%.Tests,
  /Graphics/Triangle/Tests%.Tests,
  /Hwdg/Tests%.Tests,
  /Int/Tests%.Tests,
  /LFSR/Tests%.Tests,
  /List/Tests%.Tests,
  /Map/Tests%.Tests,
  /Maybe/Tests%.Tests,
  /Md5/Tests%.Tests,
  /Pinball/Tests%.Tests,
  /Rat/Tests%.Tests,
  /Sat/Tests%.Tests,
  /String/Tests%.Tests,
  /Sudoku/Tests%.Tests,
  /Core/Test/Tests%.Tests,
  /TicTacToe/Tests%.Tests
]);

Stdio@ Main = (IO@ io, List@<String@> args) {
  Bool@ verbose = args.?(
    cons: /String/Eq%.Eq(Str|'--verbose', args.cons.head),
    nil: False);

  verbose.?(
    true: /Core/Test%.RunTestsVerbose(io.stdout, AllTests),
    false: /Core/Test%.RunTests(io.stdout, AllTests));
};

Main;
