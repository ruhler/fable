#!/bin/sh
# generate a build stamp\
exec tclsh8.6 "$0" "$@"

# Outputs a C program that defines the given identifer as a const char* with
# the contents of the build stamp.
set id [lindex $argv 0]
set entries [list]
lappend entries [exec date -I]
catch { lappend entries "dev:[exec git describe --always --dirty]" }
puts "const char* $id = \"[join $entries ","]\";"
